import Head from "next/head";
import NextLink from "next/link";
import { Button, useCreateMutation, useGameStatus } from "ui";
import Layout from "../layout/default";
import { preloadTranslations } from "../lib/server/localization";

export const getStaticProps = preloadTranslations;

export default function Home(props: unknown) {
  const { data: status } = useGameStatus();
  const { mutate: create } = useCreateMutation();

  return (
    <>
      <Head>
        <title>Werewolf</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Layout>
        <h1>
          {status ? (
            <NextLink href="/game">You are part of a game</NextLink>
          ) : (
            <Button onClick={() => create({})}>Create a game</Button>
          )}
        </h1>
      </Layout>
    </>
  );
}
